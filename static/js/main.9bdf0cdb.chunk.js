(this["webpackJsonpcombat-tracker"]=this["webpackJsonpcombat-tracker"]||[]).push([[0],{281:function(e,t,n){},282:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n(27),r=n.n(a),c=n(25),l=n(285),o=n(290),s=n(292),u=n(298),j=(n(184),n(177)),d=n(22),v=n(289),p=n(291),b=n(284),O=n(37),y=n(92),h=n(293),x=n(294),f=n(70),m=n.n(f),g=n(173),I=n(119),N=n.n(I),w="ADD_INITIATIVE",C="DELETE_ALL",E="LOAD_STATE",k="SET_INITIATIVES",T="REMOVE_CHARACTER",S="WRITE_INPUT_INITIATIVE",D="WRITE_INPUT_NAME",P="WRITE_INPUT_HP",_="DELETE_INPUT_INITIATIVE",A="DELETE_INPUT_NAME",H="DELETE_INPUT_HP",W="NEGATIVE_INPUT_INITIATIVE",F="NEXT",z="BACK",L="SELECT",R="EDIT_HP",U="EDIT_CONDITION",M="REMOVE_CONDITION",V="storedState",J={initiatives:[],selected:null,inputInitiative:0,inputName:"",inputHitpoints:0},B=function(e,t){switch(t.type){case w:var n,i,a={value:null!==(n=e.inputInitiative)&&void 0!==n?n:0,name:null!==(i=e.inputName)&&void 0!==i?i:"",hitpoints:e.inputHitpoints,id:Date.now(),monster:t.monster,conditions:[]},r=[].concat(Object(g.a)(e.initiatives),[a]).sort((function(e,t){return t.value-e.value}));return Object(d.a)(Object(d.a)({},e),{},{initiatives:r,inputInitiative:0,inputName:"",inputHitpoints:0});case C:return J;case E:return t.value;case k:return Object(d.a)(Object(d.a)({},e),{},{initiatives:t.initiatives});case T:var c=e.initiatives.filter((function(e){return e.id!==t.value}));return Object(d.a)(Object(d.a)({},e),{},{initiatives:c,selected:e.selected===t.value?null:e.selected});case S:var l=parseInt(e.inputInitiative+t.value);return Object(d.a)(Object(d.a)({},e),{},{inputInitiative:l});case D:var o=e.inputName+t.value;return Object(d.a)(Object(d.a)({},e),{},{inputName:o});case P:var s=parseInt(e.inputHitpoints+t.value);return Object(d.a)(Object(d.a)({},e),{},{inputHitpoints:s});case _:return Object(d.a)(Object(d.a)({},e),{},{inputInitiative:0});case H:return Object(d.a)(Object(d.a)({},e),{},{inputHitpoints:0});case A:var u,j;return Object(d.a)(Object(d.a)({},e),{},{inputName:null!==(u=null===e||void 0===e||null===(j=e.inputName)||void 0===j?void 0:j.slice(0,-1))&&void 0!==u?u:""});case W:return Object(d.a)(Object(d.a)({},e),{},{inputInitiative:-e.inputInitiative});case F:return Object(d.a)(Object(d.a)({},e),{},{initiatives:e.initiatives.slice(1).concat(e.initiatives.slice(0,1))});case z:return Object(d.a)(Object(d.a)({},e),{},{initiatives:e.initiatives.slice(-1).concat(e.initiatives.slice(0,-1))});case L:var v=e.initiatives.find((function(e){return e.id===t.value}));return Object(d.a)(Object(d.a)({},e),{},{selected:v.id,inputInitiative:null===v||void 0===v?void 0:v.value,inputName:null===v||void 0===v?void 0:v.name,inputHitpoints:null===v||void 0===v?void 0:v.hitpoints});case R:var p=e.initiatives.map((function(n){if(n.id===e.selected){var i=N()(n);return i.hitpoints=i.hitpoints+t.value,i}return n}));return Object(d.a)(Object(d.a)({},e),{},{initiatives:p});case U:var b=e.initiatives.map((function(n){if(n.id===e.selected){var i=N()(n);return i.conditions.push(t.value),i}return n}));return Object(d.a)(Object(d.a)({},e),{},{initiatives:b});case M:var O=e.initiatives.map((function(n){if(n.id===e.selected){var i=N()(n);return i.conditions=i.conditions.filter((function(e){return e.condition!==t.value.condition})),i}return n}));return Object(d.a)(Object(d.a)({},e),{},{initiatives:O});default:throw new Error("Unknow action ".concat(t.type))}},K=function(){var e=J;try{var t=localStorage.getItem(V);(e=t?JSON.parse(t):J).selected=null}catch(n){console.error("Error on init reducer",n),e=J}return e},X=n(6),G=Object(i.createContext)(),q=function(e){var t=e.children,n=Object(i.useReducer)(B,J,K);return Object(i.useEffect)((function(){var e=Object(c.a)(n,1)[0];m()(e,J)||localStorage.setItem(V,JSON.stringify(e))}),[n]),Object(X.jsx)(G.Provider,{value:n,children:t})},Q=function(){return Object(i.useContext)(G)},Y=["className","style"],Z=v.a.confirm,$=Object(y.d)((function(){return Object(X.jsx)(h.a,{style:{width:"15px",cursor:"pointer",color:"#999"}})})),ee=Object(y.c)((function(e){return Object(X.jsx)("tr",Object(d.a)({},e))})),te=Object(y.b)((function(e){return Object(X.jsx)("tbody",Object(d.a)({},e))})),ne=function(e){var t=e.wider,n=Q(),a=Object(c.a)(n,2),r=a[0].initiatives,l=a[1],u=Object(i.useMemo)((function(){var e=[{dataIndex:"sort",width:15,className:"drag-visible",render:function(){return Object(X.jsx)($,{})}},{title:"Name",width:"50px",className:"drag-visible",render:function(e){var t=e.name,n=e.monster;return Object(X.jsx)("span",{style:{fontWeight:500,color:n?"red":"green"},children:t})}},{title:"Init",key:"value",dataIndex:"value"}];return t&&(e.push({title:"HP",render:function(e){var t=e.hitpoints,n=e.monster;return Object(X.jsx)("span",{style:{fontWeight:500,color:t>0||!n?"green":"red"},children:t})}}),e.push({title:"Conditions",dataIndex:"conditions",key:"conditions",render:function(e){return Object(X.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:e.map((function(e){var t=e.color,n=e.condition;return Object(X.jsx)(p.a,{color:t,children:n},n)}))})}}),e.push({key:"id",render:function(e){var t=e.id,n=e.name;return Object(X.jsx)(x.a,{onClick:function(){Z({title:"Do you Want to delete ".concat(null!==n&&void 0!==n?n:"","?"),icon:null,onOk:function(){l({type:T,value:t})}})}})}})),e}),[t,l]),v=function(e){var t=e.oldIndex,n=e.newIndex;if(t!==n){var i=Object(y.a)([].concat(r),t,n).filter((function(e){return!!e}));l({type:k,initiatives:i})}};return Object(X.jsxs)("div",{style:{height:"100vh",overflowX:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",borderRight:"solid 2px lightgrey"},children:[Object(X.jsx)(b.a,{style:{height:"calc(100vh - 35px)",overflow:"scroll",overflowX:"hidden"},pagination:!1,dataSource:r,columns:u,rowKey:"id",rowSelection:{type:"radio",onChange:function(e){var t=Object(c.a)(e,1)[0];return l({type:L,value:t})}},components:{body:{wrapper:function(e){return Object(X.jsx)(te,Object(d.a)({useDragHandle:!0,helperClass:"row-dragging",onSortEnd:v},e))},row:function(e){e.className,e.style;var t=Object(j.a)(e,Y),n=r.findIndex((function(e){return e.id===t["data-row-key"]}));return Object(X.jsx)(ee,Object(d.a)({index:n},t))}}}}),Object(X.jsxs)(o.a,{style:{height:"40px"},children:[Object(X.jsx)(s.a,{span:12,children:Object(X.jsx)(O.a,{size:"large",style:{maxWidth:"150px",height:"100%"},type:"primary",disabled:r.length<2,onClick:function(){return l({type:z})},children:"Go Back"})}),Object(X.jsx)(s.a,{span:12,style:{display:"flex",flexDirection:"row-reverse"},children:Object(X.jsx)(O.a,{size:"large",style:{maxWidth:"150px",height:"100%"},type:"primary",disabled:r.length<2,onClick:function(){return l({type:F})},children:"Next Character"})})]})]})},ie=n(287),ae=n(296),re=n(295),ce=n(286),le=[{value:"1",type:S},{value:"2",type:S},{value:"3",type:S},{value:"4",type:S},{value:"5",type:S},{value:"6",type:S},{value:"7",type:S},{value:"8",type:S},{value:"9",type:S},{Icon:re.a,type:W},{value:"0",type:S}];function oe(){var e=Q(),t=Object(c.a)(e,2)[1];return Object(X.jsx)(X.Fragment,{children:le.map((function(e){var n=e.type,i=e.value,a=e.Icon,r=e.danger;return Object(X.jsx)(s.a,{span:8,children:Object(X.jsx)(O.a,{danger:r,size:"large",style:{minWidth:"70px",height:"100%"},type:"primary",onClick:function(){return t({type:n,value:i})},children:i||Object(X.jsx)(a,{})})},n+i)}))})}function se(){var e=Q(),t=Object(c.a)(e,1)[0].inputInitiative;return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(o.a,{gutter:[16,16],justify:"center",children:Object(X.jsx)(s.a,{span:8,children:Object(X.jsx)(ce.a,{style:{margin:10},value:"Initiative: "+t,precision:0})})}),Object(X.jsx)(o.a,{gutter:[8,8],children:Object(X.jsx)(oe,{})})]})}var ue=[{value:"1",type:P},{value:"2",type:P},{value:"3",type:P},{value:"4",type:P},{value:"5",type:P},{value:"6",type:P},{value:"7",type:P},{value:"8",type:P},{value:"9",type:P},{},{value:"0",type:P}];function je(){var e=Q(),t=Object(c.a)(e,2)[1];return Object(X.jsx)(X.Fragment,{children:ue.map((function(e){var n=e.type,i=e.value,a=e.Icon,r=e.danger;return n?Object(X.jsx)(s.a,{span:8,children:Object(X.jsx)(O.a,{danger:r,size:"large",style:{minWidth:"70px",height:"100%"},type:"primary",onClick:function(){return t({type:n,value:i})},children:i||Object(X.jsx)(a,{})})},null!==i&&void 0!==i?i:n):Object(X.jsx)(s.a,{span:8},"vacio")}))})}function de(){var e=Q(),t=Object(c.a)(e,1)[0].inputHitpoints;return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(o.a,{gutter:[16,16],justify:"center",children:Object(X.jsx)(s.a,{span:8,children:Object(X.jsx)(ce.a,{style:{margin:10},value:"HP: "+t,precision:0})})}),Object(X.jsx)(o.a,{gutter:[8,8],children:Object(X.jsx)(je,{})})]})}var ve=[{value:"q",type:D},{value:"w",type:D},{value:"e",type:D},{value:"r",type:D},{value:"t",type:D},{value:"y",type:D},{value:"u",type:D},{value:"i",type:D},{value:"o",type:D},{value:"p",type:D},{value:"a",type:D},{value:"s",type:D},{value:"d",type:D},{value:"f",type:D},{value:"g",type:D},{value:"h",type:D},{value:"j",type:D},{value:"k",type:D},{value:"l",type:D},{value:"\xf1",type:D},{value:"z",type:D},{value:"x",type:D},{value:"c",type:D},{value:"v",type:D},{value:"b",type:D},{value:"n",type:D},{value:"m",type:D},{value:"_",type:D},{value:"??",type:D},{value:"1",type:D},{value:"2",type:D},{value:"3",type:D},{value:"4",type:D},{value:"5",type:D},{value:"6",type:D},{value:"7",type:D},{value:"8",type:D},{value:"9",type:D},{value:"0",type:D}];function pe(e){var t=e.extraWords,n=Q(),i=Object(c.a)(n,2)[1];return Object(X.jsx)(X.Fragment,{children:ve.concat(t).map((function(e){var t=e.type,n=e.value,a=e.Icon;return Object(X.jsx)(s.a,{children:Object(X.jsx)(O.a,{size:"large",style:{minWidth:"70px",height:"100%"},type:"primary",onClick:function(){return i({type:t,value:n})},children:n||Object(X.jsx)(a,{})})},n)}))})}var be=function(){var e,t,n=Q(),i=Object(c.a)(n,1)[0].inputName,a=window.location.search,r=new URLSearchParams(a),l=r.get("players")?r.get("players"):null,u=null!==(e=null===l||void 0===l||null===(t=l.split("-"))||void 0===t?void 0:t.map((function(e){return{value:e,type:D}})))&&void 0!==e?e:[];return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(o.a,{gutter:[16,16],justify:"center",children:Object(X.jsx)(s.a,{children:Object(X.jsx)(ce.a,{style:{margin:10},value:"Name: "+i})})}),Object(X.jsx)(o.a,{gutter:[8,8],children:Object(X.jsx)(pe,{extraWords:u})})]})},Oe=ie.a.Step,ye=[{title:"Name"},{title:"Initiative"},{title:"Hit Points"}];function he(){var e=Q(),t=Object(c.a)(e,2)[1],n=Object(i.useState)(0),a=Object(c.a)(n,2),r=a[0],l=a[1];return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(ie.a,{current:r,children:ye.map((function(e){return Object(X.jsx)(Oe,{title:e.title},e.title)}))}),1===r&&Object(X.jsx)(se,{}),0===r&&Object(X.jsx)(be,{}),2===r&&Object(X.jsx)(de,{}),Object(X.jsxs)("div",{className:"steps-action",children:[0===r&&Object(X.jsx)(O.a,{danger:!0,style:{width:"100px"},type:"primary",onClick:function(){return t({type:A})},children:Object(X.jsx)(ae.a,{})}),1===r&&Object(X.jsx)(O.a,{danger:!0,style:{width:"100px"},type:"primary",onClick:function(){return t({type:_})},children:Object(X.jsx)(x.a,{})}),2===r&&Object(X.jsx)(O.a,{danger:!0,style:{width:"100px"},type:"primary",onClick:function(){return t({type:H})},children:Object(X.jsx)(x.a,{})}),r>0&&Object(X.jsx)(O.a,{onClick:function(){return l(r-1)},children:"Previous"}),r<ye.length-1&&Object(X.jsx)(O.a,{type:"primary",onClick:function(){return l(r+1)},children:"Next"}),r===ye.length-1&&Object(X.jsx)(O.a,{type:"primary",danger:!0,onClick:function(){l(0),t({type:w,monster:!0})},children:"Create as a Monster"}),r===ye.length-1&&Object(X.jsx)(O.a,{type:"primary",onClick:function(){l(0),t({type:w,monster:!1})},children:"Create as a Player"})]})]})}var xe=n(288),fe=n(297),me=v.a.confirm,ge=function(e){localStorage.setItem("states",JSON.stringify(e))},Ie=function(){var e=[];try{var t=localStorage.getItem("states");e=t?JSON.parse(t):[]}catch(n){console.error("Error on getStates from settings",n)}return e};function Ne(){var e=Q(),t=Object(c.a)(e,2),n=t[0],a=t[1],r=Object(i.useState)(null),l=Object(c.a)(r,2),u=l[0],j=l[1],d=Object(i.useState)(null),v=Object(c.a)(d,2),p=v[0],y=v[1],h=Object(i.useState)(Ie()),f=Object(c.a)(h,2),m=f[0],g=f[1];return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)(o.a,{gutter:[8,8],children:Object(X.jsx)(s.a,{children:Object(X.jsxs)(O.a,{size:"large",danger:!0,type:"primary",onClick:function(){me({title:"Do you want to delete everything in the store?",icon:null,onOk:function(){a({type:C})}})},children:[Object(X.jsx)(x.a,{})," Delete Store"]})})}),Object(X.jsxs)(o.a,{gutter:[8,8],children:[Object(X.jsx)(s.a,{span:14,children:Object(X.jsx)(xe.a,{size:"large",placeholder:"name",value:p,onChange:function(e){var t=e.target.value;return y(t)}})}),Object(X.jsx)(s.a,{span:5,children:Object(X.jsx)(O.a,{size:"large",type:"primary",disabled:!p,onClick:function(){me({title:"Do you want to save the actual character set list?",icon:null,onOk:function(){var e={name:p,id:Date.now(),state:n};m.push(e),y(null),ge(m),setTimeout((function(){return g(Ie())}),0)}})},children:Object(X.jsx)(fe.a,{})})}),Object(X.jsx)(s.a,{span:5,children:Object(X.jsx)(O.a,{size:"large",type:"primary",disabled:!u,onClick:function(){me({title:"Do you want to activate this fight set list?",icon:null,onOk:function(){a({type:E,value:u})}})},children:"Activate"})})]}),Object(X.jsx)(b.a,{style:{overflow:"scroll",overflowX:"hidden"},pagination:!1,dataSource:m,columns:[{title:"Creation Date",key:"id",dataIndex:"id",render:function(e){return Object(X.jsx)("span",{children:new Date(e).toDateString()})}},{title:"Fight",key:"name",dataIndex:"name"},{render:function(e){var t=e.id,n=e.name;return Object(X.jsx)(x.a,{onClick:function(){me({title:"Do you Want to delete ".concat(null!==n&&void 0!==n?n:"","?"),icon:null,onOk:function(){var e=null===m||void 0===m?void 0:m.filter((function(e){return t!==e.id}));ge(e),setTimeout((function(){return g(Ie())}),0)}})}})}}],rowKey:"state",rowSelection:{type:"radio",onChange:function(e){var t=Object(c.a)(e,1)[0];return j(t)}}})]})}var we=n(90),Ce=[{value:1,type:R},{value:2,type:R},{value:3,type:R},{value:5,type:R},{value:10,type:R},{value:20,type:R},{value:30,type:R},{value:50,type:R}],Ee=[{color:"grey",condition:"Petrified",add:U,remove:M},{color:"lime",condition:"Incapacitated",add:U,remove:M},{color:"gold",condition:"Unconscious",add:U,remove:M},{color:"orange",condition:"Paralyzed",add:U,remove:M},{color:"cornflowerblue",condition:"Invisible",add:U,remove:M},{color:"cyan",condition:"Deafened",add:U,remove:M},{color:"geekblue",condition:"Blinded",add:U,remove:M},{color:"blue",condition:"Frightened",add:U,remove:M},{color:"purple",condition:"Grappled",add:U,remove:M},{color:"burlywood",condition:"Restrained",add:U,remove:M},{color:"magenta",condition:"Charmed",add:U,remove:M},{color:"green",condition:"Poisoned",add:U,remove:M},{color:"red",condition:"Stunned",add:U,remove:M},{color:"volcano",condition:"Prone",add:U,remove:M}];function ke(e){var t=e.conditions,n=Q(),i=Object(c.a)(n,2)[1];return Object(X.jsx)(X.Fragment,{children:Ee.map((function(e){var n=e.add,a=e.remove,r=e.condition,c=e.color,l=null===t||void 0===t?void 0:t.find((function(e){return e.condition===r}));return Object(X.jsx)(s.a,{span:6,children:Object(X.jsxs)(p.a,{color:"cornflowerblue",onClick:function(){return i({type:l?a:n,value:{condition:r,color:c}})},children:[l&&Object(X.jsx)(x.a,{})," ",r]},r)},r)}))})}function Te(e){var t=e.isNegative,n=Q(),i=Object(c.a)(n,2)[1];return Object(X.jsx)(X.Fragment,{children:Ce.map((function(e){var n=e.type,a=e.value,r=e.Icon;return n?Object(X.jsx)(s.a,{span:8,children:Object(X.jsxs)(O.a,{size:"large",style:{minWidth:"70px",height:"100%"},type:"primary",onClick:function(){return i({type:n,value:t?-a:a})},children:[t&&"- ",a||Object(X.jsx)(r,{})]})},a):Object(X.jsx)(s.a,{span:8},"vacio")}))})}function Se(){var e,t=Q(),n=Object(c.a)(t,1)[0],a=n.initiatives,r=n.selected,l=Object(i.useState)(!0),u=Object(c.a)(l,2),j=u[0],d=u[1],v=null!==(e=null===a||void 0===a?void 0:a.find((function(e){return e.id===r})))&&void 0!==e?e:{},p=v.conditions,b=v.name;return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)("div",{className:"LabelName",children:Object(X.jsx)("span",{className:"Name",children:b})}),Object(X.jsx)("div",{className:"LabelName",children:"Hit Points:"}),Object(X.jsx)(o.a,{gutter:[16,16],justify:"center",children:Object(X.jsx)(s.a,{children:Object(X.jsxs)(o.a,{gutter:[8,8],children:[Object(X.jsx)(s.a,{span:8,children:Object(X.jsx)(we.a,{checked:j,onChange:function(e){var t=e.target.checked;return d(t)},children:"Minus"})}),Object(X.jsx)(Te,{isNegative:j})]})})}),Object(X.jsx)("div",{className:"LabelName",children:"Conditions:"}),Object(X.jsx)(o.a,{gutter:[16,16],justify:"center",children:Object(X.jsx)(s.a,{children:Object(X.jsx)(o.a,{gutter:[8,8],children:Object(X.jsx)(ke,{conditions:p})})})})]})}n(281);var De=l.a.TabPane,Pe=function(){var e=Q(),t=Object(c.a)(e,1)[0].selected,n=Object(i.useState)("2"),a=Object(c.a)(n,2),r=a[0],j=a[1];return Object(i.useEffect)((function(){t||j("2")}),[t]),Object(X.jsxs)(o.a,{style:{width:"100%",height:"100%"},children:[Object(X.jsx)(s.a,{span:"2"===r?8:14,children:Object(X.jsx)(ne,{wider:"1"===r})}),Object(X.jsx)(s.a,{span:"2"===r?16:10,children:Object(X.jsxs)(l.a,{style:{padding:8},onChange:j,activeKey:r,children:[Object(X.jsx)(De,{tab:"Add Character",children:Object(X.jsx)(he,{})},"2"),Object(X.jsx)(De,{disabled:!t,tab:"Character Manager",children:Object(X.jsx)(Se,{})},"1"),Object(X.jsx)(De,{tab:Object(X.jsxs)(X.Fragment,{children:[" ",Object(X.jsx)(u.a,{})," Settings"]}),children:Object(X.jsx)(Ne,{})},"3")]})})]})},_e=function(){return Object(X.jsx)(q,{children:Object(X.jsx)(Pe,{})})};r.a.render(Object(X.jsx)(_e,{}),document.getElementById("root"))}},[[282,1,2]]]);
//# sourceMappingURL=main.9bdf0cdb.chunk.js.map