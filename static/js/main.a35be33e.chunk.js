(this["webpackJsonpcombat-tracker"]=this["webpackJsonpcombat-tracker"]||[]).push([[0],{269:function(e,t,n){},270:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n(27),r=n.n(a),c=n(25),l=n(273),o=n(278),s=n(280),u=n(286),d=(n(180),n(173)),j=n(23),v=n(274),p=n(276),b=n(279),O=n(272),y=n(39),h=n(95),x=n(281),f=n(282),m=n(75),g=n.n(m),I=n(169),N=n(124),T=n.n(N),w="ADD_INITIATIVE",E="DELETE_ALL",C="LOAD_STATE",k="SET_INITIATIVES",S="REMOVE_CHARACTER",D="WRITE_INPUT_INITIATIVE",P="WRITE_INPUT_NAME",_="WRITE_INPUT_HP",A="DELETE_INPUT_INITIATIVE",H="DELETE_INPUT_NAME",W="DELETE_INPUT_HP",F="NEGATIVE_INPUT_INITIATIVE",z="NEXT",L="BACK",R="SELECT",U="EDIT_HP",M="EDIT_CONDITION",V="REMOVE_CONDITION",J="storedState",B={initiatives:[],selected:null,inputInitiative:0,inputName:"",inputHitpoints:0,time:0,rounds:0,firstTurn:null},K=function(e,t){switch(t.type){case w:var n,i,a={value:null!==(n=e.inputInitiative)&&void 0!==n?n:0,name:null!==(i=e.inputName)&&void 0!==i?i:"",hitpoints:e.inputHitpoints,id:Date.now(),monster:t.monster,conditions:[]},r=[].concat(Object(I.a)(e.initiatives),[a]).sort((function(e,t){return t.value-e.value})),c=r[0].id;return Object(j.a)(Object(j.a)({},e),{},{firstTurn:c,initiatives:r,inputInitiative:0,inputName:"",inputHitpoints:0});case E:return B;case C:return t.value;case k:var l=t.initiatives[0].id;return Object(j.a)(Object(j.a)({},e),{},{initiatives:t.initiatives,firstTurn:l});case S:var o=e.initiatives.filter((function(e){return e.id!==t.value})),s=e.selected===t.value?null:e.selected,u=o[0].id;return Object(j.a)(Object(j.a)({},e),{},{initiatives:o,selected:s,firstTurn:u});case D:var d=parseInt(e.inputInitiative+t.value);return Object(j.a)(Object(j.a)({},e),{},{inputInitiative:d});case P:var v=e.inputName+t.value;return Object(j.a)(Object(j.a)({},e),{},{inputName:v});case _:var p=parseInt(e.inputHitpoints+t.value);return Object(j.a)(Object(j.a)({},e),{},{inputHitpoints:p});case A:return Object(j.a)(Object(j.a)({},e),{},{inputInitiative:0});case W:return Object(j.a)(Object(j.a)({},e),{},{inputHitpoints:0});case H:var b,O;return Object(j.a)(Object(j.a)({},e),{},{inputName:null!==(b=null===e||void 0===e||null===(O=e.inputName)||void 0===O?void 0:O.slice(0,-1))&&void 0!==b?b:""});case F:return Object(j.a)(Object(j.a)({},e),{},{inputInitiative:-e.inputInitiative});case z:var y=e.firstTurn,h=e.time,x=e.rounds,f=e.initiatives.slice(1).concat(e.initiatives.slice(0,1));return y===f[0].id&&(x+=1,h+=6),Object(j.a)(Object(j.a)({},e),{},{initiatives:f,time:h,rounds:x});case L:var m=e.initiatives.slice(-1).concat(e.initiatives.slice(0,-1));return Object(j.a)(Object(j.a)({},e),{},{initiatives:m});case R:var g=e.initiatives.find((function(e){return e.id===t.value}));return Object(j.a)(Object(j.a)({},e),{},{selected:g.id,inputInitiative:null===g||void 0===g?void 0:g.value,inputName:null===g||void 0===g?void 0:g.name,inputHitpoints:null===g||void 0===g?void 0:g.hitpoints});case U:var N=e.initiatives.map((function(n){if(n.id===e.selected){var i=T()(n);return i.hitpoints=i.hitpoints+t.value,i}return n}));return Object(j.a)(Object(j.a)({},e),{},{initiatives:N});case M:var J=e.initiatives.map((function(n){if(n.id===e.selected){var i=T()(n);return i.conditions.push(t.value),i}return n}));return Object(j.a)(Object(j.a)({},e),{},{initiatives:J});case V:var K=e.initiatives.map((function(n){if(n.id===e.selected){var i=T()(n);return i.conditions=i.conditions.filter((function(e){return e.condition!==t.value.condition})),i}return n}));return Object(j.a)(Object(j.a)({},e),{},{initiatives:K});default:throw new Error("Unknow action ".concat(t.type))}},X=function(){var e=B;try{var t=localStorage.getItem(J);(e=t?JSON.parse(t):B).selected=null}catch(n){console.error("Error on init reducer",n),e=B}return e},G=n(6),q=Object(i.createContext)(),Q=function(e){var t=e.children,n=Object(i.useReducer)(K,B,X);return Object(i.useEffect)((function(){var e=Object(c.a)(n,1)[0];g()(e,B)||localStorage.setItem(J,JSON.stringify(e))}),[n]),Object(G.jsx)(q.Provider,{value:n,children:t})},Y=function(){return Object(i.useContext)(q)},Z=["className","style"],$=v.a.Text,ee=p.a.confirm,te=Object(h.d)((function(){return Object(G.jsx)(x.a,{style:{width:"15px",cursor:"pointer",color:"#999"}})})),ne=Object(h.c)((function(e){return Object(G.jsx)("tr",Object(j.a)({},e))})),ie=Object(h.b)((function(e){return Object(G.jsx)("tbody",Object(j.a)({},e))})),ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new Date(null);return t.setSeconds(e),t.toISOString().substr(11,8)},re=function(e){var t=e.wider,n=Y(),a=Object(c.a)(n,2),r=a[0],l=r.initiatives,u=r.rounds,v=r.time,p=a[1],x=Object(i.useMemo)((function(){var e=[{dataIndex:"sort",width:15,className:"drag-visible",render:function(){return Object(G.jsx)(te,{})}},{title:"Name",width:"50px",className:"drag-visible",render:function(e){var t=e.name,n=e.monster;return Object(G.jsx)("span",{style:{fontWeight:500,color:n?"red":"green"},children:t})}},{title:"Init",key:"value",dataIndex:"value"}];return t&&(e.push({title:"HP",render:function(e){var t=e.hitpoints,n=e.monster;return Object(G.jsx)("span",{style:{fontWeight:500,color:t>0||!n?"green":"red"},children:t})}}),e.push({title:"Conditions",dataIndex:"conditions",key:"conditions",render:function(e){return Object(G.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:e.map((function(e){var t=e.color,n=e.condition;return Object(G.jsx)(b.a,{color:t,children:n},n)}))})}}),e.push({key:"id",render:function(e){var t=e.id,n=e.name;return Object(G.jsx)(f.a,{onClick:function(){ee({title:"Do you Want to delete ".concat(null!==n&&void 0!==n?n:"","?"),icon:null,onOk:function(){p({type:S,value:t})}})}})}})),e}),[t,p]),m=function(e){var t=e.oldIndex,n=e.newIndex;if(t!==n){var i=Object(h.a)([].concat(l),t,n).filter((function(e){return!!e}));p({type:k,initiatives:i})}};return Object(G.jsxs)("div",{style:{height:"100vh",overflowX:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between",borderRight:"solid 2px lightgrey"},children:[Object(G.jsx)(O.a,{style:{height:"calc(100vh - 35px)",overflow:"scroll",overflowX:"hidden"},pagination:!1,dataSource:l,columns:x,rowKey:"id",rowSelection:{type:"radio",onChange:function(e){var t=Object(c.a)(e,1)[0];return p({type:R,value:t})}},components:{body:{wrapper:function(e){return Object(G.jsx)(ie,Object(j.a)({useDragHandle:!0,helperClass:"row-dragging",onSortEnd:m},e))},row:function(e){e.className,e.style;var t=Object(d.a)(e,Z),n=l.findIndex((function(e){return e.id===t["data-row-key"]}));return Object(G.jsx)(ne,Object(j.a)({index:n},t))}}}}),Object(G.jsxs)(o.a,{style:{height:"40px"},children:[Object(G.jsx)(s.a,{span:6,children:Object(G.jsx)(y.a,{size:"large",style:{maxWidth:"150px",height:"100%"},type:"primary",title:"Previous turn",disabled:l.length<2,onClick:function(){return p({type:L})},children:"Back"})}),Object(G.jsx)(s.a,{span:6,children:Object(G.jsxs)($,{keyboard:!0,children:["Rounds: ",u]})}),Object(G.jsx)(s.a,{span:6,children:Object(G.jsxs)($,{keyboard:!0,children:["Time: ",ae(v)]})}),Object(G.jsx)(s.a,{span:6,style:{display:"flex",flexDirection:"row-reverse"},children:Object(G.jsx)(y.a,{size:"large",style:{maxWidth:"150px",height:"100%"},type:"primary",title:"Next turn",disabled:l.length<2,onClick:function(){return p({type:z})},children:"Next"})})]})]})},ce=n(275),le=n(284),oe=n(283),se=v.a.Title,ue=[{value:"1",type:D},{value:"2",type:D},{value:"3",type:D},{value:"4",type:D},{value:"5",type:D},{value:"6",type:D},{value:"7",type:D},{value:"8",type:D},{value:"9",type:D},{Icon:oe.a,type:F},{value:"0",type:D}];function de(){var e=Y(),t=Object(c.a)(e,2)[1];return Object(G.jsx)(G.Fragment,{children:ue.map((function(e){var n=e.type,i=e.value,a=e.Icon,r=e.danger;return Object(G.jsx)(s.a,{span:8,children:Object(G.jsx)(y.a,{danger:r,size:"large",title:null!==i&&void 0!==i?i:void 0,style:{minWidth:"70px",height:"100%"},type:"primary",onClick:function(){return t({type:n,value:i})},children:i||Object(G.jsx)(a,{})})},n+i)}))})}function je(){var e=Y(),t=Object(c.a)(e,1)[0].inputInitiative;return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(o.a,{gutter:[16,16],justify:"center",children:Object(G.jsx)(s.a,{span:8,children:Object(G.jsxs)(se,{style:{margin:10},level:3,children:["Initiative: ",t]})})}),Object(G.jsx)(o.a,{gutter:[8,8],children:Object(G.jsx)(de,{})})]})}var ve=v.a.Title,pe=[{value:"1",type:_},{value:"2",type:_},{value:"3",type:_},{value:"4",type:_},{value:"5",type:_},{value:"6",type:_},{value:"7",type:_},{value:"8",type:_},{value:"9",type:_},{},{value:"0",type:_}];function be(){var e=Y(),t=Object(c.a)(e,2)[1];return Object(G.jsx)(G.Fragment,{children:pe.map((function(e){var n=e.type,i=e.value,a=e.Icon,r=e.danger;return n?Object(G.jsx)(s.a,{span:8,children:Object(G.jsx)(y.a,{danger:r,size:"large",title:null!==i&&void 0!==i?i:void 0,style:{minWidth:"70px",height:"100%"},type:"primary",onClick:function(){return t({type:n,value:i})},children:i||Object(G.jsx)(a,{})})},null!==i&&void 0!==i?i:n):Object(G.jsx)(s.a,{span:8},"vacio")}))})}function Oe(){var e=Y(),t=Object(c.a)(e,1)[0].inputHitpoints;return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(o.a,{gutter:[16,16],justify:"center",children:Object(G.jsx)(s.a,{span:8,children:Object(G.jsxs)(ve,{style:{margin:10},level:3,children:["HP: ",t]})})}),Object(G.jsx)(o.a,{gutter:[8,8],children:Object(G.jsx)(be,{})})]})}var ye=v.a.Title,he=[{value:"q",type:P},{value:"w",type:P},{value:"e",type:P},{value:"r",type:P},{value:"t",type:P},{value:"y",type:P},{value:"u",type:P},{value:"i",type:P},{value:"o",type:P},{value:"p",type:P},{value:"a",type:P},{value:"s",type:P},{value:"d",type:P},{value:"f",type:P},{value:"g",type:P},{value:"h",type:P},{value:"j",type:P},{value:"k",type:P},{value:"l",type:P},{value:"\xf1",type:P},{value:"z",type:P},{value:"x",type:P},{value:"c",type:P},{value:"v",type:P},{value:"b",type:P},{value:"n",type:P},{value:"m",type:P},{value:"_",type:P},{value:"?",type:P},{value:"1",type:P},{value:"2",type:P},{value:"3",type:P},{value:"4",type:P},{value:"5",type:P},{value:"6",type:P},{value:"7",type:P},{value:"8",type:P},{value:"9",type:P},{value:"0",type:P}];function xe(e){var t=e.extraWords,n=Y(),i=Object(c.a)(n,2)[1];return Object(G.jsx)(G.Fragment,{children:he.concat(t).map((function(e){var t=e.type,n=e.value,a=e.Icon;return Object(G.jsx)(s.a,{children:Object(G.jsx)(y.a,{size:"large",title:null!==n&&void 0!==n?n:void 0,style:{minWidth:"70px",height:"100%"},type:"primary",onClick:function(){return i({type:t,value:n})},children:n||Object(G.jsx)(a,{})})},n)}))})}var fe=function(){var e,t,n=Y(),i=Object(c.a)(n,1)[0].inputName,a=window.location.search,r=new URLSearchParams(a),l=r.get("players")?r.get("players"):null,u=null!==(e=null===l||void 0===l||null===(t=l.split("-"))||void 0===t?void 0:t.map((function(e){return{value:e,type:P}})))&&void 0!==e?e:[];return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(o.a,{gutter:[16,16],justify:"center",children:Object(G.jsx)(s.a,{children:Object(G.jsxs)(ye,{style:{margin:10},level:3,children:["Name: ",i]})})}),Object(G.jsx)(o.a,{gutter:[8,8],children:Object(G.jsx)(xe,{extraWords:u})})]})},me=ce.a.Step,ge=[{title:"Name"},{title:"Initiative"},{title:"Hit Points"}];function Ie(){var e=Y(),t=Object(c.a)(e,2)[1],n=Object(i.useState)(0),a=Object(c.a)(n,2),r=a[0],l=a[1];return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(ce.a,{current:r,children:ge.map((function(e){return Object(G.jsx)(me,{title:e.title},e.title)}))}),1===r&&Object(G.jsx)(je,{}),0===r&&Object(G.jsx)(fe,{}),2===r&&Object(G.jsx)(Oe,{}),Object(G.jsxs)("div",{className:"steps-action",children:[0===r&&Object(G.jsx)(y.a,{danger:!0,title:"Delete last letter",style:{width:"100px"},type:"primary",onClick:function(){return t({type:H})},children:Object(G.jsx)(le.a,{})}),1===r&&Object(G.jsx)(y.a,{danger:!0,title:"Delete initiative",style:{width:"100px"},type:"primary",onClick:function(){return t({type:A})},children:Object(G.jsx)(f.a,{})}),2===r&&Object(G.jsx)(y.a,{danger:!0,title:"Delete HP",style:{width:"100px"},type:"primary",onClick:function(){return t({type:W})},children:Object(G.jsx)(f.a,{})}),r>0&&Object(G.jsx)(y.a,{title:"Previous Character Options",onClick:function(){return l(r-1)},children:"Previous"}),r<ge.length-1&&Object(G.jsx)(y.a,{title:"Next Character Options",type:"primary",onClick:function(){return l(r+1)},children:"Next"}),r===ge.length-1&&Object(G.jsx)(y.a,{type:"primary",title:"Add character as a Monster/NPC",danger:!0,onClick:function(){l(0),t({type:w,monster:!0})},children:"Add as a Monster"}),r===ge.length-1&&Object(G.jsx)(y.a,{type:"primary",title:"Add character as a Player",onClick:function(){l(0),t({type:w,monster:!1})},children:"Add as a Player"})]})]})}var Ne=n(277),Te=n(285),we=p.a.confirm,Ee=function(e){localStorage.setItem("states",JSON.stringify(e))},Ce=function(){var e=[];try{var t=localStorage.getItem("states");e=t?JSON.parse(t):[]}catch(n){console.error("Error on getStates from settings",n)}return e};function ke(){var e=Y(),t=Object(c.a)(e,2),n=t[0],a=t[1],r=Object(i.useState)(null),l=Object(c.a)(r,2),u=l[0],d=l[1],j=Object(i.useState)(null),v=Object(c.a)(j,2),p=v[0],b=v[1],h=Object(i.useState)(Ce()),x=Object(c.a)(h,2),m=x[0],g=x[1];return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(o.a,{gutter:[8,8],children:Object(G.jsx)(s.a,{children:Object(G.jsxs)(y.a,{size:"large",danger:!0,type:"primary",onClick:function(){we({title:"Do you want to delete everything in the store?",icon:null,onOk:function(){a({type:E})}})},children:[Object(G.jsx)(f.a,{})," Delete Store"]})})}),Object(G.jsxs)(o.a,{gutter:[8,8],children:[Object(G.jsx)(s.a,{span:14,children:Object(G.jsx)(Ne.a,{size:"large",placeholder:"name",value:p,onChange:function(e){var t=e.target.value;return b(t)}})}),Object(G.jsx)(s.a,{span:5,children:Object(G.jsx)(y.a,{size:"large",type:"primary",disabled:!p,onClick:function(){we({title:"Do you want to save the actual character set list?",icon:null,onOk:function(){var e={name:p,id:Date.now(),state:n};m.push(e),b(null),Ee(m),setTimeout((function(){return g(Ce())}),0)}})},children:Object(G.jsx)(Te.a,{})})}),Object(G.jsx)(s.a,{span:5,children:Object(G.jsx)(y.a,{size:"large",type:"primary",disabled:!u,onClick:function(){we({title:"Do you want to activate this fight set list?",icon:null,onOk:function(){a({type:C,value:u})}})},children:"Activate"})})]}),Object(G.jsx)(O.a,{style:{overflow:"scroll",overflowX:"hidden"},pagination:!1,dataSource:m,columns:[{title:"Creation Date",key:"id",dataIndex:"id",render:function(e){return Object(G.jsx)("span",{children:new Date(e).toDateString()})}},{title:"Fight",key:"name",dataIndex:"name"},{render:function(e){var t=e.id,n=e.name;return Object(G.jsx)(f.a,{onClick:function(){we({title:"Do you Want to delete ".concat(null!==n&&void 0!==n?n:"","?"),icon:null,onOk:function(){var e=null===m||void 0===m?void 0:m.filter((function(e){return t!==e.id}));Ee(e),setTimeout((function(){return g(Ce())}),0)}})}})}}],rowKey:"state",rowSelection:{type:"radio",onChange:function(e){var t=Object(c.a)(e,1)[0];return d(t)}}})]})}var Se=n(93),De=[{value:1,type:U},{value:2,type:U},{value:3,type:U},{value:5,type:U},{value:10,type:U},{value:20,type:U},{value:30,type:U},{value:50,type:U}],Pe=[{color:"grey",condition:"Petrified",add:M,remove:V},{color:"lime",condition:"Incapacitated",add:M,remove:V},{color:"gold",condition:"Unconscious",add:M,remove:V},{color:"orange",condition:"Paralyzed",add:M,remove:V},{color:"cornflowerblue",condition:"Invisible",add:M,remove:V},{color:"cyan",condition:"Deafened",add:M,remove:V},{color:"geekblue",condition:"Blinded",add:M,remove:V},{color:"blue",condition:"Frightened",add:M,remove:V},{color:"purple",condition:"Grappled",add:M,remove:V},{color:"burlywood",condition:"Restrained",add:M,remove:V},{color:"magenta",condition:"Charmed",add:M,remove:V},{color:"green",condition:"Poisoned",add:M,remove:V},{color:"red",condition:"Stunned",add:M,remove:V},{color:"volcano",condition:"Prone",add:M,remove:V}];function _e(e){var t=e.conditions,n=Y(),i=Object(c.a)(n,2)[1];return Object(G.jsx)(G.Fragment,{children:Pe.map((function(e){var n=e.add,a=e.remove,r=e.condition,c=e.color,l=null===t||void 0===t?void 0:t.find((function(e){return e.condition===r}));return Object(G.jsx)(s.a,{span:6,children:Object(G.jsxs)(b.a,{color:"cornflowerblue",onClick:function(){return i({type:l?a:n,value:{condition:r,color:c}})},children:[l&&Object(G.jsx)(f.a,{})," ",r]},r)},r)}))})}function Ae(e){var t=e.isNegative,n=Y(),i=Object(c.a)(n,2)[1];return Object(G.jsx)(G.Fragment,{children:De.map((function(e){var n=e.type,a=e.value,r=e.Icon;return n?Object(G.jsx)(s.a,{span:8,children:Object(G.jsxs)(y.a,{size:"large",style:{minWidth:"70px",height:"100%"},type:"primary",onClick:function(){return i({type:n,value:t?-a:a})},children:[t&&"- ",a||Object(G.jsx)(r,{})]})},a):Object(G.jsx)(s.a,{span:8},"vacio")}))})}function He(){var e,t=Y(),n=Object(c.a)(t,1)[0],a=n.initiatives,r=n.selected,l=Object(i.useState)(!0),u=Object(c.a)(l,2),d=u[0],j=u[1],v=null!==(e=null===a||void 0===a?void 0:a.find((function(e){return e.id===r})))&&void 0!==e?e:{},p=v.conditions,b=v.name;return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("div",{className:"LabelName",children:Object(G.jsx)("span",{className:"Name",children:b})}),Object(G.jsx)("div",{className:"LabelName",children:"Hit Points:"}),Object(G.jsx)(o.a,{gutter:[16,16],justify:"center",children:Object(G.jsx)(s.a,{children:Object(G.jsxs)(o.a,{gutter:[8,8],children:[Object(G.jsx)(s.a,{span:8,children:Object(G.jsx)(Se.a,{checked:d,onChange:function(e){var t=e.target.checked;return j(t)},children:"Minus"})}),Object(G.jsx)(Ae,{isNegative:d})]})})}),Object(G.jsx)("div",{className:"LabelName",children:"Conditions:"}),Object(G.jsx)(o.a,{gutter:[16,16],justify:"center",children:Object(G.jsx)(s.a,{children:Object(G.jsx)(o.a,{gutter:[8,8],children:Object(G.jsx)(_e,{conditions:p})})})})]})}n(269);var We=l.a.TabPane,Fe=function(){var e=Y(),t=Object(c.a)(e,1)[0].selected,n=Object(i.useState)("2"),a=Object(c.a)(n,2),r=a[0],d=a[1];return Object(i.useEffect)((function(){t||d("2")}),[t]),Object(G.jsxs)(o.a,{style:{width:"100%",height:"100%"},children:[Object(G.jsx)(s.a,{span:"2"===r?8:14,children:Object(G.jsx)(re,{wider:"1"===r})}),Object(G.jsx)(s.a,{span:"2"===r?16:10,children:Object(G.jsxs)(l.a,{style:{padding:8},onChange:d,activeKey:r,children:[Object(G.jsx)(We,{tab:"Add Character",children:Object(G.jsx)(Ie,{})},"2"),Object(G.jsx)(We,{disabled:!t,tab:"Edit Character",children:Object(G.jsx)(He,{})},"1"),Object(G.jsx)(We,{tab:Object(G.jsxs)(G.Fragment,{children:[" ",Object(G.jsx)(u.a,{})," Settings"]}),children:Object(G.jsx)(ke,{})},"3")]})})]})},ze=function(){return Object(G.jsx)(Q,{children:Object(G.jsx)(Fe,{})})};r.a.render(Object(G.jsx)(ze,{}),document.getElementById("root"))}},[[270,1,2]]]);
//# sourceMappingURL=main.a35be33e.chunk.js.map